(function(b){function c(a){for(var e=f(a),d=0;d<e.length;d++)j(e[d]);a.submit(function(){for(var g=true,h=0;h<e.length;h++)if(n(o(e[h].blur()),e[h]).length)g=false;if(!g)return false})}function f(a){for(var e="input textarea select".split(" "),d=[],g=0;g<e.length;g++)a.find(e[g]+"["+i.validationAttribute+"*="+k+"]").each(function(){d.push(b(this))});return d}function j(a){var e=o(a),d=a.after(i.errorContainer.clone()).next(),g=d.find("ol"),h=false;b(window).resize(function(){i.initialPositionContainer(d, a)}).trigger("resize");a.blur(function(){var l=n(e,a);if(l.length){if(h)g.html(l);else{g.html(l);i.showContainer(d);h=true}i.positionContainer(d,a)}else{i.hideContainer(d);h=false}});a.attr("type")=="checkbox"&&a.change(function(){b(this).blur()})}function o(a){a=a.attr(i.validationAttribute);a=a.substr(a.indexOf(k)+k.length+1);for(var e=[],d="",g=0,h=0;h<a.length;h++)switch(a[h]){case ",":if(g)d+=",";else{e.push(m(d));d=""}break;case "(":d+="(";g++;break;case ")":if(g){d+=")";g--}else e.push(m(d)); break;default:d+=a[h]}return e}function m(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")}function p(a){return a.indexOf("(")!=-1?a.substr(0,a.indexOf("(")):a}function q(a){if(a.indexOf("(")!=-1){a=a.substring(a.indexOf("(")+1,a.length-1).split(",");for(var e="",d=0;d<a.length;d++){var g=m(a[d]);e+=parseInt(g)?","+g:',"'+g+'"'}return e}else return""}function r(a,e){if(a.split("$arg").length-1){e=e.split(",");for(var d=1;d<e.length;d++)a=a.replace("$arg"+d,e[d])}return a}function n(a){for(var e= "",d=0;d<a.length;d++){var g=p(a[d]),h=q(a[d]);eval('$.fn.ketchup.validations["'+g+'"](field, field.val()'+h+")")||(e+="<li>"+r(b.fn.ketchup.messages[g],h)+"</li>")}return e}var k="validate",s=b("<div>",{"class":"ketchup-error-container",html:"<ol></ol><span></span>"});b.fn.ketchup=function(a){i=b.extend({},b.fn.ketchup.defaults,a);return this.each(function(){c(b(this))})};b.fn.ketchup.validation=function(a,e){b.fn.ketchup.validations.push(a);b.fn.ketchup.validations[a]=e};b.fn.ketchup.messages={}; b.fn.ketchup.validations=[];var i;b.fn.ketchup.defaults={validationAttribute:"class",errorContainer:s,initialPositionContainer:function(a,e){var d=e.offset();a.css({left:d.left+e.width()-10,top:d.top-a.height()})},positionContainer:function(a,e){a.animate({top:e.offset().top-a.height()})},showContainer:function(a){a.fadeIn()},hideContainer:function(a){a.fadeOut()}}})(jQuery); $.fn.ketchup.messages={required:"This field is required.",minlength:"This field must have a minimal length of $arg1.",maxlength:"This field must have a maximal length of $arg1.",rangelength:"This field must have a length between $arg1 and $arg2.",min:"Must be at least $arg1.",max:"Can not be greater than $arg1.",range:"Must be between $arg1 and $arg2.",number:"Must be a number.",digits:"Must be digits.",email:"Must be a valid E-Mail.",url:"Must be a valid URL.",username:"Must be a valid username.", match:"Must match the field above.",date:"Must be a valid date.",minselect:"Select at least $arg1 checkboxes.",maxselect:"Select not more than $arg1 checkboxes.",rangeselect:"Select between $arg1 and $arg2 checkboxes."};$.fn.ketchup.validation("required",function(b,c){return b.attr("type")=="checkbox"?b.attr("checked")==true?true:false:c.length==0?false:true});$.fn.ketchup.validation("minlength",function(b,c,f){return c.length<f?false:true}); $.fn.ketchup.validation("maxlength",function(b,c,f){return c.length>f?false:true});$.fn.ketchup.validation("rangelength",function(b,c,f,j){return c.length>=f&&c.length<=j?true:false});$.fn.ketchup.validation("min",function(b,c,f){return parseInt(c)<f?false:true});$.fn.ketchup.validation("max",function(b,c,f){return parseInt(c)>f?false:true});$.fn.ketchup.validation("range",function(b,c,f,j){return parseInt(c)>=f&&parseInt(c)<=j?true:false}); $.fn.ketchup.validation("number",function(b,c){return/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(c)?true:false});$.fn.ketchup.validation("digits",function(b,c){return/^\d+$/.test(c)?true:false}); $.fn.ketchup.validation("email",function(b,c){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(c)?true: false}); $.fn.ketchup.validation("url",function(b,c){return/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(c)?true: false});$.fn.ketchup.validation("username",function(b,c){return/^([a-zA-Z])[a-zA-Z_-]*[\w_-]*[\S]$|^([a-zA-Z])[0-9_-]*[\S]$|^[a-zA-Z]*[\S]$/.test(c)?true:false});$.fn.ketchup.validation("match",function(b,c,f){return $(f).val()!=c?false:true});$.fn.ketchup.validation("date",function(b,c){return/Invalid|NaN/.test(new Date(c))?false:true}); function watchSelect(b){$("input["+$.fn.ketchup.defaults.validationAttribute+'*="'+b+'"]').each(function(){var c=$(this);$('input[name="'+c.attr("name")+'"]').each(function(){var f=$(this);f.attr($.fn.ketchup.defaults.validationAttribute).indexOf(b)==-1&&f.blur(function(){c.blur()})})})}$(document).ready(function(){watchSelect("minselect");watchSelect("maxselect");watchSelect("rangeselect")}); $.fn.ketchup.validation("minselect",function(b,c,f){return $('input[name="'+b.attr("name")+'"]:checked').length>=f?true:false});$.fn.ketchup.validation("maxselect",function(b,c,f){return $('input[name="'+b.attr("name")+'"]:checked').length<=f?true:false});$.fn.ketchup.validation("rangeselect",function(b,c,f,j){b=$('input[name="'+b.attr("name")+'"]:checked');return b.length>=f&&b.length<=j?true:false});